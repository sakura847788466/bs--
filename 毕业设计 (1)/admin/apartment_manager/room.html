<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>学生宿舍管理系统</title>
    <link rel="stylesheet" href="../static/css/bootstrap.css">
    <script src="../static/js/jquery-3.3.1.js"></script>
    <script src="../static/js/bootstrap.js"></script>
</head>

<body>
    <div style="display:flex;align-items: center;">
        <img src="../static/img/log.png">
        <h1 style="margin-left:200px;">学&nbsp生&nbsp宿&nbsp舍&nbsp后&nbsp台&nbsp管&nbsp理系&nbsp统</h1>
    </div>

    <ul class="nav nav-tabs" style="background:orange">
        <li class="tab_item" style="margin-left:100px;"><a onmouseover="this.style.background='white';this.style.color='orange';" onmouseleave="if(this.parentNode.className == 'tab_item'){this.style.background='orange';this.style.color='white';}" href="index.html" style="color:white">首页</a></li>
        <li class="tab_item active"><a style="background:white;color:orange;" onmouseover="this.style.background='white';this.style.color='orange';" onmouseleave="if(this.parentNode.className == 'tab_item'){this.style.background='orange';this.style.color='white';}" href="room.html"
                style="color:white">学生宿舍管理</a></li>
        <li class="tab_item"><a onmouseover="this.style.background='white';this.style.color='orange';" onmouseleave="if(this.parentNode.className == 'tab_item'){this.style.background='orange';this.style.color='white';}" href="student.html" style="color:white">学生信息管理</a></li>
        <li class="tab_item"><a onmouseover="this.style.background='white';this.style.color='orange';" onmouseleave="if(this.parentNode.className == 'tab_item'){this.style.background='orange';this.style.color='white';}" href="repair.html" style="color:white">宿舍报修信息管理</a></li>
        <li class="tab_item"><a onmouseover="this.style.background='white';this.style.color='orange';" onmouseleave="if(this.parentNode.className == 'tab_item'){this.style.background='orange';this.style.color='white';}" href="cost.html" style="color:white">水电费管理</a></li>
        <li class="tab_item"><a onmouseover="this.style.background='white';this.style.color='orange';" onmouseleave="if(this.parentNode.className == 'tab_item'){this.style.background='orange';this.style.color='white';}" href="entry_exit.html" style="color:white">物品出入管理</a></li>
        <li class="tab_item"><a onmouseover="this.style.background='white';this.style.color='orange';" onmouseleave="if(this.parentNode.className == 'tab_item'){this.style.background='orange';this.style.color='white';}" href="modify_password.html" style="color:white">修改密码</a></li>
        <div role="presentation" style="float:right;margin:10px 100px 10px 0"><a style="color:white" href="http://127.0.0.1:3000/login.html">注销</a></div>
        <div role="presentation" style="float:right;margin:10px 20px 10px 0"><a style="color:white" href="javascript:;">欢迎您：<span class="username"></span></a>
        </div>
    </ul>

    <div style="margin:auto;width:1000px;height:100%">

        <div style="margin-top:30px;margin-bottom:100px">
            <table class="table table-striped" style="table-layout:fixed;margin:auto;">
                <tbody>
                    <tr class="" style="background:orange;color:white">
                        <th class="" colspan="4">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">所有1楼的寝室
                                </font>
                            </font>
                            <div class="btn-group">
                                <button type="button" style="border:1px" class="btn btn-warning dropdown-toggle btn-xs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="caret"></span>
                </button>

                                <ul class="dropdown-menu" style="background:#FFFFE0">

                                    <li>
                                        <a href="#">
                                            <font style="vertical-align: inherit;">
                                                <font style="vertical-align: inherit;">1楼</font>
                                            </font>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="/apartment/room/2/">
                                            <font style="vertical-align: inherit;">
                                                <font style="vertical-align: inherit;">2楼</font>
                                            </font>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="/apartment/room/3/">
                                            <font style="vertical-align: inherit;">
                                                <font style="vertical-align: inherit;">3楼</font>
                                            </font>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="/apartment/room/4/">
                                            <font style="vertical-align: inherit;">
                                                <font style="vertical-align: inherit;">4楼</font>
                                            </font>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="/apartment/room/5/">
                                            <font style="vertical-align: inherit;">
                                                <font style="vertical-align: inherit;">5楼</font>
                                            </font>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="/apartment/room/6/">
                                            <font style="vertical-align: inherit;">
                                                <font style="vertical-align: inherit;">6楼</font>
                                            </font>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="/apartment/room/7/">
                                            <font style="vertical-align: inherit;">
                                                <font style="vertical-align: inherit;">7楼</font>
                                            </font>
                                        </a>
                                    </li>

                                </ul>
                            </div>

                        </th>
                        <th></th>
                    </tr>

                    <tr class="" style="text-align:center">
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">编号</font>
                            </font>
                        </td>
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">床铺个数</font>
                            </font>
                        </td>
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">已入住人数</font>
                            </font>
                        </td>
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">可入住人数</font>
                            </font>
                        </td>
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">是否入住</font>
                            </font>
                        </td>
                    </tr>
                    <tr id="add" style="text-align:center;display:none;">
                        <form action="add/" method="post" onsubmit="return check_exist()"></form>
                        <input type="hidden" name="csrfmiddlewaretoken" value="ME1kWiFLEZxvi5B6AwmW968YW5GeKRdJvoCD4SoMkuMho20tFPvnI1Su2dmgSzyM">
                        <td class="active"><input type="text" id="name_text" name="name" required="" class="form-control" style="border:none;" onchange="exist()"></td>
                        <td class="active"><input type="number" required="" name="height" class="form-control" style="border:none;"></td>
                        <td class="active"><input type="number" required="" name="width" class="form-control" style="border:none;"></td>
                        <td class="active"><input type="number" required="" name="room_capacity" class="form-control" style="border:none;"></td>
                        <td class="active"><input type="number" required="" name="used" class="form-control" style="border:none;"></td>
                        <td class="active"><input type="number" required="" name="capacity" class="form-control" style="border:none;"></td>
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;"><input style="background:orange;border:0" type="submit" required="" class="btn btn-primary" value="保存"></font>
                            </font>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>


    </div>
</body>
<!-- <script src="../node_modules/mockjs/dist/mock.js"></script> -->
<script>
    getRoom()
    function  getRoom(){
         let storage =window.localStorage;
                let getusername = storage.getItem('username');
                $(".username").html(getusername)
      let url ='http://127.0.0.1:3000/goods/getRoom'
        let data ={
                // pagesize:1,
                // page:1
        }

        $.post(url,data,function(res){
            console.log(res)
            if (res.err==0) {
                    load(res.data)
             }
        })
}
   
//渲染页面数据
function load(data){
     if(data.length>0){
        console.log(888)
        let str=''
        for(i=0;i<data.length;i++){
     str+=`<tr class="" style="text-align:center">
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">${data[i]['num']}</font>
                            </font>
                        </td>
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">${data[i]['bedNum']}</font>
                            </font>
                        </td>
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">${data[i]['canRoom']}</font>
                            </font>
                        </td>
                        <td class="active">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">${data[i]['roomed']}</font>
                            </font>
                        </td>

                        <td class="active">
                            <a href="/apartment/room/detail/D2129/" style="color:black;">
                                <font style="vertical-align: inherit;">
                                    <font style="vertical-align: inherit;">${data[i]['see']}</font>
                                </font>
                            </a>
                        </td>
                    </tr>`

        }
                 $('tbody').append(str);              
     }
   }


</script>


</html>